# Nebula Workflow Engine Configuration

# Environment
RUST_ENV=development
RUST_LOG=nebula=debug,tower_http=debug,info
RUST_BACKTRACE=1

# Server Configuration
NEBULA_HOST=127.0.0.1
NEBULA_PORT=8080
NEBULA_WORKERS=4

# Database Configuration
DATABASE_URL=postgres://nebula:nebula_dev_password@localhost:5432/nebula_workflows
DATABASE_MAX_CONNECTIONS=100
DATABASE_MIN_CONNECTIONS=10
DATABASE_CONNECT_TIMEOUT_SECONDS=30
DATABASE_IDLE_TIMEOUT_SECONDS=600
DATABASE_MAX_LIFETIME_SECONDS=1800

# S3/MinIO Configuration
S3_ENDPOINT=http://localhost:9000
S3_REGION=us-east-1
S3_ACCESS_KEY_ID=nebula_admin
S3_SECRET_ACCESS_KEY=nebula_dev_password
S3_BUCKET_WORKFLOWS=nebula-workflows
S3_BUCKET_ARTIFACTS=nebula-artifacts
S3_USE_PATH_STYLE=true

# Redis Configuration (optional)
REDIS_URL=redis://:nebula_dev_password@localhost:6379/0
REDIS_POOL_SIZE=20

# Security
JWT_SECRET=your-super-secret-jwt-key-change-in-production
ENCRYPTION_KEY=your-32-byte-encryption-key-here-change-it
API_KEY_HEADER=X-API-Key

# Workflow Engine Configuration
WORKFLOW_EXECUTION_TIMEOUT_SECONDS=3600
WORKFLOW_MAX_RETRIES=3
WORKFLOW_RETRY_DELAY_SECONDS=60
WORKFLOW_MAX_CONCURRENT_EXECUTIONS=1000
WORKFLOW_PERSISTENCE_INTERVAL_SECONDS=10

# Plugin Configuration
PLUGIN_DIRECTORY=./plugins
PLUGIN_SCAN_INTERVAL_SECONDS=60
PLUGIN_LOAD_TIMEOUT_SECONDS=30

# Resource Limits
MAX_UPLOAD_SIZE_MB=100
MAX_WORKFLOW_SIZE_MB=10
MAX_NODE_OUTPUT_SIZE_MB=50
MAX_BINARY_STORAGE_SIZE_GB=1000

# Monitoring and Tracing
TRACING_ENABLED=true
TRACING_JAEGER_ENDPOINT=http://localhost:14268/api/traces
TRACING_SERVICE_NAME=nebula-workflow-engine
METRICS_ENABLED=true
METRICS_PROMETHEUS_ENDPOINT=0.0.0.0:9099

# External Service Timeouts
HTTP_CLIENT_TIMEOUT_SECONDS=30
HTTP_CLIENT_MAX_REDIRECTS=5
HTTP_CLIENT_MAX_CONNECTIONS_PER_HOST=50

# Development Settings
DEV_MODE=true
MOCK_EXTERNAL_SERVICES=false
ENABLE_SWAGGER_UI=true
ENABLE_GRAPHQL_PLAYGROUND=true

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST_SIZE=20

# Webhook Configuration
WEBHOOK_SIGNATURE_HEADER=X-Webhook-Signature
WEBHOOK_TIMEOUT_SECONDS=30
WEBHOOK_MAX_RETRIES=3

# Expression Parser
EXPRESSION_MAX_DEPTH=10
EXPRESSION_MAX_ITERATIONS=1000
EXPRESSION_TIMEOUT_SECONDS=5

# Feature Flags
FEATURE_DYNAMIC_PLUGINS=true
FEATURE_DISTRIBUTED_EXECUTION=false
FEATURE_WORKFLOW_VERSIONING=true
FEATURE_AI_NODES=true
FEATURE_EXPERIMENTAL_PARSER=false

# Logging Configuration
LOG_FORMAT=json
LOG_FILE_PATH=./logs/nebula.log
LOG_FILE_MAX_SIZE_MB=100
LOG_FILE_MAX_BACKUPS=10
LOG_INCLUDE_CALLER=true

# UI Configuration
UI_ENABLED=true
UI_BASE_PATH=/ui
UI_WEBSOCKET_ENABLED=true
UI_WEBSOCKET_PING_INTERVAL_SECONDS=30